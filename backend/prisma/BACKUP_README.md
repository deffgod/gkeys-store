# Database Backup

## Описание

Скрипт для создания полного бэкапа базы данных через Prisma.

## Использование

### Через npm script:
```bash
npm run db:backup
```

### Напрямую:
```bash
npx tsx scripts/backup-db-prisma.ts
```

## Результат

Скрипт создает два файла в папке `prisma/`:

1. **`backup-YYYY-MM-DDTHH-MM-SS.json`** - Полный бэкап с временной меткой
2. **`backup-latest.json`** - Ссылка на последний бэкап

## Формат бэкапа

Бэкап содержит:
- Метаданные (дата экспорта, версия, URL базы данных)
- Статистику по таблицам (количество записей)
- Все данные из всех таблиц

**Важно:** 
- Пароли пользователей заменены на `***REDACTED***`
- Игровые ключи заменены на `***REDACTED***` (по соображениям безопасности)

## Восстановление

Для восстановления данных используйте JSON файл бэкапа с соответствующим скриптом восстановления (если будет создан).

## Требования

- Доступ к базе данных через `DATABASE_URL` или `DIRECT_URL`
- Установленный Prisma Client
- Node.js с поддержкой TypeScript

## Примечания

- Бэкап создается в формате JSON для удобства просмотра и обработки
- Рекомендуется создавать бэкапы регулярно
- Храните бэкапы в безопасном месте
